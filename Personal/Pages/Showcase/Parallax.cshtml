@page
@model Personal.Pages.Showcase.ParallaxModel
@{
    ViewData["Title"] = "Parallax";
}

<div class="plx-page">

    <!-- ========== 1. DEPTH FIELD ========== -->
    <section class="plx-section plx-depth">
        <div class="plx-layer" data-plx-y="-0.35">
            <div class="plx-shape plx-dot" style="top:8%;left:12%;width:4px;height:4px;opacity:0.25;"></div>
            <div class="plx-shape plx-dot" style="top:25%;left:75%;width:3px;height:3px;opacity:0.2;"></div>
            <div class="plx-shape plx-dot" style="top:60%;left:90%;width:5px;height:5px;opacity:0.3;"></div>
            <div class="plx-shape plx-dot" style="top:80%;left:20%;width:3px;height:3px;opacity:0.15;"></div>
            <div class="plx-shape plx-dot" style="top:45%;left:50%;width:4px;height:4px;opacity:0.2;"></div>
            <div class="plx-shape plx-dot" style="top:15%;left:40%;width:3px;height:3px;opacity:0.18;"></div>
            <div class="plx-shape plx-dot" style="top:70%;left:65%;width:5px;height:5px;opacity:0.22;"></div>
        </div>
        <div class="plx-layer" data-plx-y="-0.2">
            <div class="plx-shape plx-ring" style="top:15%;right:18%;width:60px;height:60px;"></div>
            <div class="plx-shape plx-ring" style="top:65%;left:10%;width:40px;height:40px;opacity:0.4;"></div>
            <div class="plx-shape plx-cross" style="top:35%;left:80%;"></div>
            <div class="plx-shape plx-cross" style="top:75%;left:55%;opacity:0.3;"></div>
        </div>
        <div class="plx-layer" data-plx-y="-0.08">
            <div class="plx-shape plx-line" style="top:30%;left:5%;width:80px;transform:rotate(25deg);"></div>
            <div class="plx-shape plx-line" style="top:55%;right:8%;width:60px;transform:rotate(-15deg);"></div>
        </div>
        <div class="plx-content" data-plx-y="-0.03">
            <div class="plx-tag">Scroll down</div>
            <h2 class="plx-title">Depth Field</h2>
            <p class="plx-subtitle">Layers moving at different speeds create a sense of three-dimensional depth as you scroll.</p>
        </div>
    </section>

    <!-- ========== 2. DRIFT SPLIT ========== -->
    <section class="plx-section plx-drift-section">
        <div class="plx-section-label" data-plx-y="-0.05">
            <span class="plx-num">02</span>
            <h2 class="plx-section-title">Drift Split</h2>
        </div>
        <div class="plx-drift-row">
            <div class="plx-drift-card" data-plx-x="-0.15" data-plx-y="-0.04">
                <div class="plx-drift-icon"><i class="fas fa-layer-group"></i></div>
                <h3>Float Left</h3>
                <p>This card drifts in from the left as you scroll, at its own independent speed.</p>
            </div>
            <div class="plx-drift-card" data-plx-x="0.15" data-plx-y="-0.08">
                <div class="plx-drift-icon"><i class="fas fa-arrows-alt-h"></i></div>
                <h3>Float Right</h3>
                <p>Opposing horizontal velocities make the two cards converge and diverge.</p>
            </div>
        </div>
        <div class="plx-drift-card plx-drift-card--wide" data-plx-x="-0.08" data-plx-y="-0.06">
            <div class="plx-drift-icon"><i class="fas fa-wind"></i></div>
            <h3>Slow Drift</h3>
            <p>A subtler, slower horizontal drift adds a calm, floating quality to larger content blocks.</p>
        </div>
    </section>

    <!-- ========== 3. ZOOM REVEAL ========== -->
    <section class="plx-section plx-zoom-section">
        <div class="plx-section-label" data-plx-y="-0.05">
            <span class="plx-num">03</span>
            <h2 class="plx-section-title">Zoom Reveal</h2>
        </div>
        <div class="plx-zoom-target" data-plx-scale="1">
            <div class="plx-zoom-inner">
                <i class="fas fa-expand-arrows-alt plx-zoom-icon"></i>
                <h3>Scale on Scroll</h3>
                <p>This element grows from small and blurry to full size as it approaches the viewport center.</p>
            </div>
        </div>
        <div class="plx-zoom-bg-ring" data-plx-y="-0.15" data-plx-rotate="0.08"></div>
        <div class="plx-zoom-bg-ring plx-zoom-bg-ring--sm" data-plx-y="-0.25" data-plx-rotate="-0.12"></div>
    </section>

    <!-- ========== 4. ROTATION ORBIT ========== -->
    <section class="plx-section plx-rotate-section">
        <div class="plx-section-label" data-plx-y="-0.05">
            <span class="plx-num">04</span>
            <h2 class="plx-section-title">Rotation Orbit</h2>
        </div>
        <div class="plx-orbit-wrap">
            <div class="plx-orbit-card" data-plx-rotate="0.12" data-plx-y="-0.06">
                <i class="fas fa-cog"></i>
                <span>Clockwise</span>
            </div>
            <div class="plx-orbit-card" data-plx-rotate="-0.18" data-plx-y="-0.1">
                <i class="fas fa-sync-alt"></i>
                <span>Counter</span>
            </div>
            <div class="plx-orbit-card" data-plx-rotate="0.25" data-plx-y="-0.04">
                <i class="fas fa-atom"></i>
                <span>Fast</span>
            </div>
            <div class="plx-orbit-card" data-plx-rotate="-0.06" data-plx-y="-0.12">
                <i class="fas fa-compass"></i>
                <span>Gentle</span>
            </div>
        </div>
    </section>

    <!-- ========== 5. TEXT SHEAR ========== -->
    <section class="plx-section plx-shear-section">
        <div class="plx-section-label" data-plx-y="-0.05">
            <span class="plx-num">05</span>
            <h2 class="plx-section-title">Text Shear</h2>
        </div>
        <div class="plx-shear-wrap">
            <div class="plx-shear-line" data-plx-x="-0.15">Every line of text</div>
            <div class="plx-shear-line" data-plx-x="0.12">moves at its own</div>
            <div class="plx-shear-line" data-plx-x="-0.22">horizontal speed</div>
            <div class="plx-shear-line" data-plx-x="0.08">creating a cascade</div>
            <div class="plx-shear-line" data-plx-x="-0.18">of diagonal motion</div>
        </div>
    </section>

    <!-- ========== 6. PERSPECTIVE DEPTH ========== -->
    <section class="plx-section plx-perspective-section">
        <div class="plx-section-label" data-plx-y="-0.05">
            <span class="plx-num">06</span>
            <h2 class="plx-section-title">Perspective Depth</h2>
        </div>
        <div class="plx-persp-wrap">
            <div class="plx-persp-card" data-plx-y="-0.04" data-plx-rotate="0.04">
                <i class="fas fa-mountain"></i>
                <span>Far</span>
            </div>
            <div class="plx-persp-card" data-plx-y="-0.1" data-plx-rotate="-0.02">
                <i class="fas fa-tree"></i>
                <span>Mid</span>
            </div>
            <div class="plx-persp-card" data-plx-y="-0.18">
                <i class="fas fa-home"></i>
                <span>Near</span>
            </div>
        </div>
        <p class="plx-persp-hint" data-plx-y="-0.08">Cards at different depths create a natural perspective effect as you scroll.</p>
    </section>

    <!-- ========== END ========== -->
    <section class="plx-section plx-end-section">
        <div class="plx-content" data-plx-y="-0.05">
            <i class="fas fa-check-circle plx-end-icon"></i>
            <h2 class="plx-title">That's Parallax</h2>
            <p class="plx-subtitle">Every element on this page moved independently — driven by pure scroll position and CSS transforms.</p>
        </div>
    </section>

</div>

@section Scripts {
<script>
(function () {
    const page = document.querySelector('.plx-page');
    if (!page) return;

    const els = page.querySelectorAll('[data-plx-y],[data-plx-x],[data-plx-rotate],[data-plx-scale]');
    const viewH = window.innerHeight;
    let ticking = false;

    function update() {
        const scrollY = window.scrollY;
        const center = scrollY + viewH * 0.5;

        els.forEach(el => {
            const rect = el.getBoundingClientRect();
            const elCenter = scrollY + rect.top + rect.height * 0.5;
            const dist = center - elCenter;

            let ty = 0, tx = 0, rot = 0, sc = 1, blur = 0;

            if (el.dataset.plxY) ty = dist * parseFloat(el.dataset.plxY);
            if (el.dataset.plxX) tx = dist * parseFloat(el.dataset.plxX);
            if (el.dataset.plxRotate) rot = dist * parseFloat(el.dataset.plxRotate);

            if (el.dataset.plxScale) {
                const norm = Math.max(0, Math.min(1, 1 - Math.abs(dist) / (viewH * 0.8)));
                sc = 0.4 + norm * 0.6;
                blur = (1 - norm) * 12;
            }

            let tf = 'translate3d(' + tx.toFixed(1) + 'px,' + ty.toFixed(1) + 'px,0)';
            if (rot) tf += ' rotate(' + rot.toFixed(2) + 'deg)';
            if (sc !== 1) tf += ' scale(' + sc.toFixed(3) + ')';

            el.style.transform = tf;
            if (blur > 0.1) el.style.filter = 'blur(' + blur.toFixed(1) + 'px)';
            else el.style.filter = '';
        });
        ticking = false;
    }

    window.addEventListener('scroll', function () {
        if (!ticking) { requestAnimationFrame(update); ticking = true; }
    }, { passive: true });

    update();
})();
</script>
}
